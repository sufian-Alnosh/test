<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بيانات الزائر</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>بيانات الزائر</h1>
    <div id="info-table"></div>
    <script>
        async function fetchVisitorData() {
            try {
                const response = await fetch('/visitor-info');
                const data = await response.json();
                displayInfo(data);
            } catch (error) {
                console.error('Error fetching visitor info:', error);
            }
        }

        function displayInfo(info) {
            const infoTable = document.getElementById('info-table');
            infoTable.innerHTML = `
                <table>
                    <tr><th>المعلومة</th><th>القيمة</th></tr>
                    <tr><td>IP</td><td>${info.ip}</td></tr>
                    <tr><td>المدينة</td><td>${info.city}</td></tr>
                    <tr><td>المنطقة</td><td>${info.region}</td></tr>
                    <tr><td>الدولة</td><td>${info.country}</td></tr>
                    <tr><td>الموقع الجغرافي</td><td>${info.loc}</td></tr>
                    <tr><td>مقدم الخدمة</td><td>${info.org}</td></tr>
                </table>
            `;
        }

        async function fetchVisitorData() {
    try {
        const response = await fetch('/visitor-info');
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        const data = await response.json();
        console.log('Data received:', data);
        displayInfo(data);
    } catch (error) {
        console.error('Error fetching visitor info:', error);
    }
}

        // استدعاء الدالة لتحميل بيانات الزائر عند تحميل الصفحة
        fetchVisitorData();
    </script>
</body>
</html>